map_chr(make_experience_indvidual) %>%
paste0("\\multirow{3}{*}{",.,"}")
is.na(X$date_end) %>%
draw_circle %>%
c(rep(" ",n)) %>%
matrix(ncol=2)
is.na(X$date_end) %>%
draw_circle %>%
c(rep(" ",n)) %>%
matrix(ncol=2) %>%
unlist
is.na(X$date_end) %>%
draw_circle %>%
c(rep(" ",n)) %>%
matrix(ncol=2) %>%
c
is.na(X$date_end) %>%
draw_circle %>%
c(rep(" ",n)) %>%
matrix(byrow=T,ncol=2) %>%
c
is.na(X$date_end) %>%
draw_circle %>%
c(rep(" ",n)) %>%
matrix(byrow=T,nrow=2) %>%
c
is.na(X$date_end) %>%
draw_circle %>%
c(rep(" ",n),.) %>%
matrix(byrow=T,nrow=2) %>%
c %>%
`[`(-1)
is.na(X$date_end) %>%
draw_circle %>%
c(rep(" ",n),.) %>%
matrix(byrow=T,nrow=2) %>%
c(" ")
is.na(X$date_end) %>%
draw_circle
x <- .Last.value
class(x)
inserter <- " "
surround <- T
vector(class(x),2*length(x)-1 + surround*2)
y[1:k*2 + surround] <- x
y <- vector(class(x),2*length(x)-1 + surround*2)
y[1:k*2 + surround] <- x
k <- length(x)
y <- vector(class(x),2*length(x)-1 + surround*2)
y[1:k*2 + surround] <- x
y
k <- length(x)
y <- vector(class(x),2*length(x)-1 + surround*2)
y[1:k*2 -1 + surround] <- x
y
k <- length(x)
y <- rep(inserter,2*length(x)-1+surround*2)
y[1:k*2 -1 + surround] <- x
y
space_out <- function(x,inserter,surround=T){
k <- length(x)
y <- rep(inserter,2*length(x)-1+surround*2)
y[1:k*2 -1 + surround] <- x
y
}
stem <- is.na(X$date_end) %>%
draw_circle %>%
space_out(" ")
stem
cells[1:n %% 2 == 1]
cells[1:n %% 2 == 0]
(1:n)
(1:n) %% 2
left_col <- c(left_header,cells[which((1:n) %% 2 == 0)]
}
}
### Publications
{
paste_authors <- function(x){
for(i in 1:length(x)){
aut <- x[[i]]$authors
aut[aut == "michael-barrowman"] <- "**Michael A Barrowman**"
n_aut <- length(aut)
if(n_aut == 2){
aut <- paste0(aut[1]," & ",aut[2])
} else {
aut <- paste0(paste0(aut[-n_aut],collapse=", ")," & ",aut[n_aut])
}
x[[i]]$authors <- aut
x[[i]]$image <- NULL
}
x
}
get_publications <- function(){
pub_dir <- here::here("content","publication")
pubs_list <- list.dirs(pub_dir,recursive = F)
pubs_index_files <- vapply(pubs_list,file.path,character(1),"index.md")
pubs_YAML_list <- lapply(pubs_index_files,configr::read.config)
pubs_YAML_authored <- paste_authors(pubs_YAML_list)
pubs_tbl <- basic_flatten(pubs_YAML_authored)
pubs_tbl$year <- lubridate::year(lubridate::ymd(pubs_tbl$date))
pubs_tbl
}
}
left_col
left_col <- c(left_header,cells[which((1:n) %% 2 == 0)])
left_header <- "Experience"
left_col <- c(left_header,cells[which((1:n) %% 2 == 0)])
left_col
c(left_header,cells[which((1:n) %% 2 == 0)]) %>%
space_out(" ",surround=F)
cells
cells[which((1:n) %% 2 == 0)]
x <- 1:10
inserter <- c(0,0)
k <- length(x)
k_spaced <- length(x)*(length(inserter)+1)
k_spaced
x <- 1:5
k <- length(x)
len_y <- len_x*(len_ins+1 + surround)
len_x <- length(x)
len_ins <- length(inserter)
len_y <- len_x*(len_ins+1 + surround)
len_y
len_x <- length(x)
len_ins <- length(inserter)
len_x <- length(x)
len_ins <- length(inserter)
len_y <- len_x + (len_x -1 + 2*surround)*len_ins
len_y
surround
length(x)
len_ins
4*2
4*2 + 5 + 2*2
y <- vector(class(x),len_y)
y
1:len_y
1:len_ins
c(inserter,length(x))
rep(inserter,length(x))
inserter <- c(-1,-2)
rep(inserter,length(x))
rep(inserter,each=length(x))
rep(inserter,each=length(x))
matrix(c(x,rep(inserter,each=length(x))))
matrix(c(x,rep(inserter,each=length(x))),
nrow=length(x))
M <- matrix(c(x,rep(inserter,each=length(x))),
nrow=length(x))
apply(M,2,c)
apply(M,2,list)
apply(M,1,list)
apply(M,1,list)
lapply(apply(M,1,list),c)
vapply(apply(M,1,list),c,vector(class(x),length(inserter)+1))
vector(class(x),length(inserter)+1)
vapply(apply(M,1,list),c,vector(class(x),length(inserter)+1))
M <- matrix(c(x,rep(inserter,each=length(x))),
nrow=length(x))
M
unlist(M)
c(M)
M <- matrix(c(x,rep(inserter,each=length(x))),
byrow=T,
ncol=length(x))
c(M)
c(matrix(c(x,rep(inserter,each=length(x))),
byrow=T,
ncol=length(x)))
y <- c(matrix(c(x,
rep(inserter,each=length(x))),
byrow=T,
ncol=length(x)))
y
y <- c(matrix(c(rep(inserter,each=length(x)),
x),
byrow=T,
ncol=length(x)))
y
space_out <- function(x,inserter,surround=T){
y <- c(matrix(c(rep(inserter,each=length(x)),
x),
byrow=T,
ncol=length(x)))
if(surround){
y[-(1:length(inserter))]
} else {
c(y,inserter)
}
}
stem <- is.na(X$date_end) %>%
draw_circle %>%
space_out(" ")
stem
space_out <- function(x,inserter,surround=T){
y <- c(matrix(c(rep(inserter,each=length(x)),
x),
byrow=T,
ncol=length(x)))
if(surround){
c(y,inserter)
} else {
y[-(1:length(inserter))]
}
}
stem <- is.na(X$date_end) %>%
draw_circle %>%
space_out(" ")
stem
left_col <- cells[which((1:n) %% 2 == 0)] %>%
space_out(c(" "," "),surround=F)
left_col
cells[which((1:n) %% 2 == 0)] %>%
space_out(c(" "," "),surround=F) %>%
c(" "," ")
left_col <- cells[which((1:n) %% 2 == 0)] %>%
space_out(c(" "," "),surround=F) %>%
c(left_header," ",.," "," ")
length(left_col)
which((1:n) %% 2 == 0)
left_col <- cells[which((1:n) %% 2 == 0)] %>%
space_out(c(" "," "),surround=F) %>%
c(left_header," ",.)
left_col
length(left_col)
left_col <- cells[which((1:n) %% 2 == 0)] %>%
space_out(c(" "," "," "),surround=F) %>%
c(left_header," ",.," "," ")
left_col
length(left_col)
cells[which(1:n) %%2 == 1)]
which((1:n) %%2 == 1)
cells[which((1:n) %%2 == 1)]
cells[which((1:n) %%2 == 1)] %>%
space_out(c(" "," "," ")) %>%
c(" "," ")
right_col <- cells[which((1:n) %%2 == 1)] %>%
space_out(c(" "," "," "),surround=F) %>%
c(" "," ")
right_col
stem <- is.na(X$date_end) %>%
draw_circle %>%
space_out(" ")
length(stem)
bench::mark(mods = (n %% 2 == 1),
lens = length(left_col) < length(right_col))
(n %% 2 == 1)
if(n %% 2 == 1){
left_col <- c(left_col,c(" "," "))
} else {
right_col <- c(right_col,c(" "," "))
}
left_col
right_col
paste0(left_col," & ",stem," & ",right_col)
paste0(left_col," & ",stem," & ",right_col,collapse="\\")
make_experience <- function(X,n){
X <- X[1:n,]
cells <- X %>%
split(1:nrow(.)) %>%
map_chr(make_experience_indvidual) %>%
paste0("\\multirow{3}{*}{",.,"}")
stem <- is.na(X$date_end) %>%
draw_circle %>%
space_out(" ")
left_header <- "Experience"
left_col <- cells[which((1:n) %% 2 == 0)] %>%
space_out(c(" "," "," "),surround=F) %>%
c(left_header," ",.," "," ")
right_col <- cells[which((1:n) %%2 == 1)] %>%
space_out(c(" "," "," "),surround=F) %>%
c(" "," ")
if(n %% 2 == 1){
left_col <- c(left_col,c(" "," "))
} else {
right_col <- c(right_col,c(" "," "))
}
paste0(left_col," & ",stem," & ",right_col,collapse="\\")
}
make_experience(get_experience(),7)
make_experience(7)
make_experience <- function(n){
X <- get_experience()[1:n,]
cells <- X %>%
split(1:nrow(.)) %>%
map_chr(make_experience_indvidual) %>%
paste0("\\multirow{3}{*}{",.,"}")
stem <- is.na(X$date_end) %>%
draw_circle %>%
space_out(" ")
left_header <- "Experience"
left_col <- cells[which((1:n) %% 2 == 0)] %>%
space_out(c(" "," "," "),surround=F) %>%
c(left_header," ",.," "," ")
right_col <- cells[which((1:n) %%2 == 1)] %>%
space_out(c(" "," "," "),surround=F) %>%
c(" "," ")
if(n %% 2 == 1){
left_col <- c(left_col,c(" "," "))
} else {
right_col <- c(right_col,c(" "," "))
}
paste0("\begin{table}",
paste0(left_col," & ",stem," & ",right_col,collapse="\\"),
"\end{table}")
}
make_experience <- function(n){
X <- get_experience()[1:n,]
cells <- X %>%
split(1:nrow(.)) %>%
map_chr(make_experience_indvidual) %>%
paste0("\\multirow{3}{*}{",.,"}")
stem <- is.na(X$date_end) %>%
draw_circle %>%
space_out(" ")
left_header <- "Experience"
left_col <- cells[which((1:n) %% 2 == 0)] %>%
space_out(c(" "," "," "),surround=F) %>%
c(left_header," ",.," "," ")
right_col <- cells[which((1:n) %%2 == 1)] %>%
space_out(c(" "," "," "),surround=F) %>%
c(" "," ")
if(n %% 2 == 1){
left_col <- c(left_col,c(" "," "))
} else {
right_col <- c(right_col,c(" "," "))
}
paste0("\\begin{table}",
paste0(left_col," & ",stem," & ",right_col,collapse="\\"),
"\\end{table}")
}
make_experience(7)
make_experience(5)
make_experience(6)
<!-- rmarkdown::render(here::here("pdf-build","make_pdf.Rmd"),output_dir=here::here("assets","files"),output_file="michael-barrowman-cv.pdf") -->
rmarkdown::render(here::here("pdf-build","make_pdf.Rmd"),output_dir=here::here("assets","files"),output_file="michael-barrowman-cv.pdf")
rmarkdown::render(here::here("pdf-build","make_pdf.Rmd"),output_dir=here::here("assets","files"),output_file="michael-barrowman-cv.pdf")
rmarkdown::render(here::here("pdf-build","make_pdf.Rmd"),output_dir=here::here("assets","files"),output_file="michael-barrowman-cv.pdf")
rmarkdown::render(here::here("pdf-build","make_pdf.Rmd"),output_dir=here::here("assets","files"),output_file="michael-barrowman-cv.pdf")
rmarkdown::render(here::here("pdf-build","make_pdf.Rmd"),output_dir=here::here("assets","files"),output_file="michael-barrowman-cv.pdf")
rmarkdown::render(here::here("pdf-build","make_pdf.Rmd"),output_dir=here::here("assets","files"),output_file="michael-barrowman-cv.pdf")
rmarkdown::render(here::here("pdf-build","make_pdf.Rmd"),output_dir=here::here("assets","files"),output_file="michael-barrowman-cv.pdf")
rmarkdown::render(here::here("pdf-build","make_pdf.Rmd"),output_dir=here::here("assets","files"),output_file="michael-barrowman-cv.pdf")
rmarkdown::render(here::here("pdf-build","make_pdf.Rmd"),output_dir=here::here("assets","files"),output_file="michael-barrowman-cv.pdf")
make_experience_indvidual <- function(.x){
c("\\textbf{\\large <title>}",
"\\textit{\\textcolor{lightgray}{<company>}}",
"<month_start> - <month_end>",
"<description>") %>%
paste0(collapse="\n") %>%
str_glue_data(.x,.,.open="<",.close=">") %>%
as.character %>%
paste0("\\parbox{3in}{",.,"}")
}
rmarkdown::render(here::here("pdf-build","make_pdf.Rmd"),output_dir=here::here("assets","files"),output_file="michael-barrowman-cv.pdf")
rmarkdown::render(here::here("pdf-build","make_pdf.Rmd"),output_dir=here::here("assets","files"),output_file="michael-barrowman-cv.pdf")
rmarkdown::render(here::here("pdf-build","make_pdf.Rmd"),output_dir=here::here("assets","files"),output_file="michael-barrowman-cv.pdf")
rmarkdown::render(here::here("pdf-build","make_pdf.Rmd"),output_dir=here::here("assets","files"),output_file="michael-barrowman-cv.pdf")
rmarkdown::render(here::here("pdf-build","make_pdf.Rmd"),output_dir=here::here("assets","files"),output_file="michael-barrowman-cv.pdf")
rmarkdown::render(here::here("pdf-build","make_pdf.Rmd"),output_dir=here::here("assets","files"),output_file="michael-barrowman-cv.pdf")
rmarkdown::render(here::here("pdf-build","make_pdf.Rmd"),output_dir=here::here("assets","files"),output_file="michael-barrowman-cv.pdf")
X %>%
split(1:nrow(.)) %>%
map_chr(make_experience_indvidual)
X %>%
split(1:nrow(.)) %>%
map_chr(make_experience_indvidual) %>%
paste0("\\placetextbox{",seq(0.2,0.8,length.out=n),"}{2in}{",.,"}")
### EXPERIENCE
{
get_experience <- function(){
exp_file_path <- here::here("content","experience","experience.md")
exp_TOML <- read_TOML_header(exp_file_path)
exp_data <- extract_config(exp_TOML)
weight <- exp_data$weight
exp <- exp_data$experience
exp_tbl <- basic_flatten(exp)
exp_tbl$date_start <- lubridate::ymd(exp_tbl$date_start)
exp_tbl$date_end <- lubridate::ymd(exp_tbl$date_end)
exp_tbl$month_start <- format(exp_tbl$date_start,"%b %Y")
exp_tbl$month_end <- format(exp_tbl$date_end,"%b %Y")
exp_tbl$month_end[is.na(exp_tbl$month_end)] <- "Present"
exp_tbl
}
make_experience_indvidual <- function(.x){
c("\\textbf{\\large <title>}",
"\\textit{\\textcolor{lightgray}{<company>}}",
"<month_start> - <month_end>",
"<description>") %>%
paste0(collapse="\n") %>%
str_glue_data(.x,.,.open="<",.close=">") %>%
as.character %>%
paste0("\\parbox{3in}{",.,"}")
}
draw_circle <- function(fill){
if_else(fill,
"A",
"B")
}
make_experience <- function(n){
X <- get_experience()[1:n,]
cells <- X %>%
split(1:nrow(.)) %>%
map_chr(make_experience_indvidual) %>%
paste0("\\placetextbox{",seq(0.2,0.8,length.out=n),"}{0.6}{",.,"}")
stem <- is.na(X$date_end) %>%
draw_circle %>%
space_out(" ")
left_header <- "Experience"
left_col <- cells[which((1:n) %% 2 == 0)] %>%
space_out(c(" "," "," "),surround=F) %>%
c(left_header," ",.," "," ")
right_col <- cells[which((1:n) %%2 == 1)] %>%
space_out(c(" "," "," "),surround=F) %>%
c(" "," ")
if(n %% 2 == 1){
left_col <- c(left_col,c(" "," "))
} else {
right_col <- c(right_col,c(" "," "))
}
#paste0("\\begin{tabular}{lcl}\n",
#       paste0(left_col," & ",stem," & ",right_col,collapse="\\\\\n"),
#       "\n\\end{tabular}")
paste0(cells,collapse="\n")
}
}
rmarkdown::render(here::here("pdf-build","make_pdf.Rmd"),output_dir=here::here("assets","files"),output_file="michael-barrowman-cv.pdf")
?str_wrap
make_experience_indvidual <- function(.x){
c("\\textbf{\\large <title>}",
"\\textit{\\textcolor{lightgray}{<company>}}",
"<month_start> - <month_end>",
"<str_wrap(description,width=40)>") %>%
paste0(collapse="\n") %>%
str_glue_data(.x,.,.open="<",.close=">") %>%
as.character #%>%
#paste0("\\parbox{3in}{",.,"}")
}
rmarkdown::render(here::here("pdf-build","make_pdf.Rmd"),output_dir=here::here("assets","files"),output_file="michael-barrowman-cv.pdf")
.x
c("\\textbf{\\large <title>}",
"\\textit{\\textcolor{lightgray}{<company>}}",
"<month_start> - <month_end>",
"<str_wrap(description,width=40)>") %>%
paste0(collapse="\n") %>%
str_glue_data(.x,.,.open="<",.close=">") %>%
as.character %>%
gsub("&","\\\\&",.)
cat(.Last.value)
X
.x <- X[2,]
c("\\textbf{\\large <title>}",
"\\textit{\\textcolor{lightgray}{<company>}}",
"<month_start> - <month_end>",
"<str_wrap(description,width=40)>") %>%
paste0(collapse="\n") %>%
str_glue_data(.x,.,.open="<",.close=">") %>%
as.character %>%
gsub("&","\\\\&",.)
cat(.Last.value)
rmarkdown::render(here::here("pdf-build","make_pdf.Rmd"),output_dir=here::here("assets","files"),output_file="michael-barrowman-cv.pdf")
rmarkdown::render(here::here("pdf-build","make_pdf.Rmd"),output_dir=here::here("assets","files"),output_file="michael-barrowman-cv.pdf")
rmarkdown::render(here::here("pdf-build","make_pdf.Rmd"),output_dir=here::here("assets","files"),output_file="michael-barrowman-cv.pdf")
rmarkdown::render(here::here("pdf-build","make_pdf.Rmd"),output_dir=here::here("assets","files"),output_file="michael-barrowman-cv.pdf")
rmarkdown::render(here::here("pdf-build","make_pdf.Rmd"),output_dir=here::here("assets","files"),output_file="michael-barrowman-cv.pdf")
rmarkdown::render(here::here("pdf-build","make_pdf.Rmd"),output_dir=here::here("assets","files"),output_file="michael-barrowman-cv.pdf")
rmarkdown::render(here::here("pdf-build","make_pdf.Rmd"),output_dir=here::here("assets","files"),output_file="michael-barrowman-cv.pdf")
rmarkdown::render(here::here("pdf-build","make_pdf.Rmd"),output_dir=here::here("assets","files"),output_file="michael-barrowman-cv.pdf")
rmarkdown::render(here::here("pdf-build","make_pdf.Rmd"),output_dir=here::here("assets","files"),output_file="michael-barrowman-cv.pdf")
rmarkdown::render(here::here("pdf-build","make_pdf.Rmd"),output_dir=here::here("assets","files"),output_file="michael-barrowman-cv.pdf")
rmarkdown::render(here::here("pdf-build","make_pdf.Rmd"),output_dir=here::here("assets","files"),output_file="michael-barrowman-cv.pdf")
rmarkdown::render(here::here("pdf-build","make_pdf.Rmd"),output_dir=here::here("assets","files"),output_file="michael-barrowman-cv.pdf")
rmarkdown::render(here::here("pdf-build","make_pdf.Rmd"),output_dir=here::here("assets","files"),output_file="michael-barrowman-cv.pdf")
rmarkdown::render(here::here("pdf-build","make_pdf.Rmd"),output_dir=here::here("assets","files"),output_file="michael-barrowman-cv.pdf")
lapply(list(1, "a", TRUE), str)
str
str.default
base:::str.default
utils:::str.default
?invisible
git
git2r::status()
git2r::ls_tree("main")
x <- git2r::ls_tree("main")
dim(x)
length(x)
head(x)
?git2r::ls_tree("main")
git2r::ls_tree()$name
names(git2r::ls_tree())
#Colintraive to Rhubodach
2*1.20 + 6.10 +
#Rothesay to Wemyss Bay
2*3.25 + 11.60
#Hopscotch
2*4.45 + 17.70
?future_map
n <- 100
df1 <- data.frame(x = rnorm(n),
y = rnorm(n))
rm(list=ls())
predict.coxph
furrr::future_pmap
furrr::future_pmap_dfr
furrr:::future_pmap_template
furrr::future_pmap_dbl
?tab_calls
?tab_cells
flextable::tab_cells
?flextable::tab_cells
